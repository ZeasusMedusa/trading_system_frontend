# ๐ Frontend ั ัะดะฐะปัะฝะฝัะผ ะฑัะบะตะฝะดะพะผ

## ๐ ะะฟะธัะฐะฝะธะต

ะะพะฝัะธะณััะฐัะธั ะดะปั ะทะฐะฟััะบะฐ ััะพะฝัะตะฝะดะฐ ั ะฟะพะดะบะปััะตะฝะธะตะผ ะบ ัะดะฐะปัะฝะฝะพะผั ะฑัะบะตะฝะดั, ะบะพัะพััะน ัะฐะฑะพัะฐะตั ะฒ ะฟัะธะฒะฐัะฝะพะน Docker ัะตัะธ `trading_internal_net`.

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   ะัะฐัะทะตั       โ    โ   Nginx         โ    โ   Frontend      โ
โ   (ะฒะฝะตัะฝะธะน)     โโโโโถโ   (ะฟะพัั 80)     โโโโโถโ   (Next.js)     โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                                โ                        โ
                                โ                        โ
                                โผ                        โผ
                       โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                       โ   API ะทะฐะฟัะพัั    โ    โ   Backend       โ
                       โ   /api/*        โ    โ   (ะฒะฝัััะตะฝะฝะธะน)  โ
                       โ   /backtest/*   โโโโโถโ   backend:8000  โ
                       โ   /strategy/*   โ    โ   (ะฟัะธะฒะฐัะฝัะน)   โ
                       โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะะพะฝัะธะณััะฐัะธะธ

### 1. **ะัะพััะพะน ััะพะฝัะตะฝะด** (ะฑะตะท Nginx)
- **ะคะฐะนะป**: `docker-compose.frontend-only.yml`
- **ะะพัั**: 3000 (ะฟัะพะฑัะฐััะฒะฐะตััั ะฝะฐััะถั)
- **API**: ะััะผะพะต ะฟะพะดะบะปััะตะฝะธะต ะบ `backend:8000`

### 2. **ะคัะพะฝัะตะฝะด ั Nginx** (ัะตะบะพะผะตะฝะดัะตััั)
- **ะคะฐะนะป**: `docker-compose.frontend-with-nginx.yml`
- **ะะพัั**: 80 (ัะพะปัะบะพ Nginx ะฝะฐััะถั)
- **API**: Nginx ะฟัะพะบัะธััะตั ะบ `backend:8000`

## ๐ ะะฐะฟััะบ

### ะะฐัะธะฐะฝั 1: ะก Nginx (ัะตะบะพะผะตะฝะดัะตััั)

```bash
# 1. ะะฐัััะพะนัะต environment
cp env.frontend-only.example .env.production

# 2. ะฃะฑะตะดะธัะตัั ััะพ ะฑัะบะตะฝะด ะทะฐะฟััะตะฝ ะฒ ัะตัะธ trading_internal_net
docker network ls | grep trading_internal_net

# 3. ะะฐะฟัััะธัะต ััะพะฝัะตะฝะด ั Nginx
make frontend-only

# 4. ะัะพะฒะตัััะต ััะฐััั
make frontend-logs
```

**ะะตะทัะปััะฐั**: 
- ๐ ะคัะพะฝัะตะฝะด ะดะพัััะฟะตะฝ ะฝะฐ `http://localhost`
- ๐ ะัะบะตะฝะด ะดะพัััะฟะตะฝ ัะพะปัะบะพ ะฒะฝัััะธ Docker ัะตัะธ
- ๐ก Nginx ะฟัะพะบัะธััะตั ะฒัะต API ะทะฐะฟัะพัั

### ะะฐัะธะฐะฝั 2: ะะตะท Nginx (ะฟัะพััะพะน)

```bash
# 1. ะะฐัััะพะนัะต environment
cp env.frontend-only.example .env.production

# 2. ะะฐะฟัััะธัะต ััะพะฝัะตะฝะด
make frontend-simple

# 3. ะัะพะฒะตัััะต ััะฐััั
docker logs smiio_frontend -f
```

**ะะตะทัะปััะฐั**: 
- ๐ ะคัะพะฝัะตะฝะด ะดะพัััะฟะตะฝ ะฝะฐ `http://localhost:3000`
- ๐ ะัะบะตะฝะด ะดะพัััะฟะตะฝ ัะพะปัะบะพ ะฒะฝัััะธ Docker ัะตัะธ

## ๐ง Environment Variables

```bash
# .env.production
FRONTEND_PORT=80                    # ะะพัั ะดะปั Nginx (ะธะปะธ 3000 ะดะปั ะฟัะพััะพะณะพ)
NEXT_PUBLIC_API_URL=http://backend:8000  # ะะฝัััะตะฝะฝะตะต ะธะผั ะฑัะบะตะฝะดะฐ
NODE_ENV=production
```

## ๐ก API ะัะพะบัะธัะพะฒะฐะฝะธะต (Nginx)

Nginx ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะพะบัะธััะตั:

- `/api/*` โ `http://backend:8000/`
- `/backtest/*` โ `http://backend:8000/backtest/`
- `/strategy/*` โ `http://backend:8000/strategy/`
- `/auth/*` โ `http://backend:8000/auth/`
- `/admin/*` โ `http://backend:8000/admin/`

## ๐๏ธ ะะพะผะฐะฝะดั ัะฟัะฐะฒะปะตะฝะธั

```bash
# ะะฐะฟััะบ
make frontend-only      # ะก Nginx
make frontend-simple    # ะะตะท Nginx

# ะะพะณะธ
make frontend-logs

# ะััะฐะฝะพะฒะบะฐ
make frontend-stop

# ะกัะฐััั
docker compose -f docker-compose.frontend-with-nginx.yml ps
```

## ๐ ะัะปะฐะดะบะฐ

### ะัะพะฒะตัะบะฐ ัะตัะธ
```bash
# ะฃะฑะตะดะธัะตัั ััะพ ัะตัั ัััะตััะฒัะตั
docker network ls | grep trading_internal_net

# ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต ะบ ะฑัะบะตะฝะดั
docker exec smiio_frontend ping backend
```

### ะัะพะฒะตัะบะฐ API
```bash
# ะขะตัั API ัะตัะตะท Nginx
curl http://localhost/api/health

# ะขะตัั API ะฝะฐะฟััะผัั (ะตัะปะธ ะฑะตะท Nginx)
curl http://localhost:3000/api/health
```

### ะะพะณะธ
```bash
# ะะพะณะธ ััะพะฝัะตะฝะดะฐ
docker logs smiio_frontend -f

# ะะพะณะธ Nginx
docker logs smiio_nginx -f

# ะัะต ะปะพะณะธ
make frontend-logs
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- โ **ะคัะพะฝัะตะฝะด ะดะพัััะฟะตะฝ ะธะทะฒะฝะต** ะฝะฐ ะฟะพััั 80
- โ **ะัะบะตะฝะด ะธะทะพะปะธัะพะฒะฐะฝ** ะฒ ะฟัะธะฒะฐัะฝะพะน ัะตัะธ
- โ **API ะทะฐะฟัะพัั ะฟัะพะบัะธัััััั** ัะตัะตะท Nginx
- โ **ะะตั ะฟััะผะพะณะพ ะดะพัััะฟะฐ** ะบ ะฑัะบะตะฝะดั ะธะทะฒะฝะต

## ๐ ะะพะฝะธัะพัะธะฝะณ

```bash
# ะกัะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ
docker ps | grep smiio

# ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
docker stats smiio_frontend smiio_nginx

# ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
curl http://localhost/health
```

## ๐จ ะฃัััะฐะฝะตะฝะธะต ะฟัะพะฑะปะตะผ

### ะัะพะฑะปะตะผะฐ: "Network not found"
```bash
# ะกะพะทะดะฐะนัะต ัะตัั ะตัะปะธ ะฝะต ัััะตััะฒัะตั
docker network create trading_internal_net
```

### ะัะพะฑะปะตะผะฐ: "Backend not reachable"
```bash
# ะัะพะฒะตัััะต ััะพ ะฑัะบะตะฝะด ะฒ ัะพะน ะถะต ัะตัะธ
docker network inspect trading_internal_net
```

### ะัะพะฑะปะตะผะฐ: "API requests fail"
```bash
# ะัะพะฒะตัััะต Nginx ะบะพะฝัะธะณััะฐัะธั
docker exec smiio_nginx nginx -t

# ะะตัะตะทะฐะฟัััะธัะต Nginx
docker restart smiio_nginx
```

## ๐ ะัะธะผะตัะฐะฝะธั

- ะคัะพะฝัะตะฝะด ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะดะบะปััะฐะตััั ะบ ัััะตััะฒัััะตะน ัะตัะธ ะฑัะบะตะฝะดะฐ
- Nginx ะพะฑะตัะฟะตัะธะฒะฐะตั ะฑะตะทะพะฟะฐัะฝะพะต ะฟัะพะบัะธัะพะฒะฐะฝะธะต API ะทะฐะฟัะพัะพะฒ
- ะัะต ะทะฐะฟัะพัั ะปะพะณะธัััััั ะดะปั ะพัะปะฐะดะบะธ
- Health checks ะพะฑะตัะฟะตัะธะฒะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะฟะตัะตะทะฐะฟััะบ ะฟัะธ ัะฑะพัั
